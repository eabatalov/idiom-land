<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>QuestDialogUIHiding</name>
    <events>
        <event-group description="" sid="9622959118338766" title="Quest dialog UI (hiding)">
            <sub-events>
                <variable constant="0" name="PendingHideCallsCount" sid="602094810575557" static="1" type="number">0</variable>
                <comment>Dialog UI should be explicitly hidden on layout start</comment>
                <variable constant="0" name="IsPhraseVisible" sid="8415885846356448" static="1" type="number">1</variable>
                <variable constant="0" name="IsQuizzVisible" sid="2275217893868348" static="1" type="number">1</variable>
                <variable constant="0" name="IsNotificationVisible" sid="1094492035787047" static="1" type="number">1</variable>
                <comment>Quest controls are set visible immediately after quest action out processing so the are visible almost all the time&#x0D;&#x0A;Implementation is hard. Disable it for now. Also our quest controls don&apos;r fade in/out. They are always on screen during the dialog. So no reason to fix.</comment>
                <variable constant="0" name="IsQuestControlsVisible" sid="4585460581407535" static="1" type="number">1</variable>
                <event-block sid="2936291383811159">
                    <conditions>
                        <condition id="0" name="On function" sid="4941695226700236" type="Function">
                            <param id="0" name="Name">&quot;VarsReset&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="9295750013365618" type="System">
                            <param id="0" name="Variable">IsPhraseVisible</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-9" name="Set value" sid="4148274816455497" type="System">
                            <param id="0" name="Variable">IsQuizzVisible</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-9" name="Set value" sid="6580007433527916" type="System">
                            <param id="0" name="Variable">IsNotificationVisible</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-9" name="Set value" sid="2977488720208068" type="System">
                            <param id="0" name="Variable">IsQuestControlsVisible</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-9" name="Set value" sid="6670221761270646" type="System">
                            <param id="0" name="Variable">PendingHideCallsCount</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>param(0): stage&#x0D;&#x0A;param(1): 1 to allow animated transition 0 otherwise</comment>
                <event-block sid="3156472250898389">
                    <conditions>
                        <condition id="0" name="On function" sid="5093405010769742" type="Function">
                            <param id="0" name="Name">&quot;HideStageUI&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="3099306298103869">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="4437090519170637" type="System">
                                    <param id="0" name="Variable">IsPhraseVisible</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="6691502790628637" type="System">
                                    <param id="0" name="Variable">IsQuizzVisible</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="3275121158332914" type="System">
                                    <param id="0" name="Variable">IsNotificationVisible</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                                <condition disabled="1" id="-14" name="Compare variable" sid="1351486787745589" type="System">
                                    <param id="0" name="Variable">IsQuestControlsVisible</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="3116943260358647">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="4484168862089178" type="System">
                                            <param id="0" name="Variable">PendingHideCallsCount</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="14" name="Log" sid="656213632247681" type="Browser">
                                            <param id="0" name="Type">0</param>
                                            <param id="1" name="Message">&quot;Hide stage UI phrase: &quot; &amp; IsPhraseVisible &amp; &quot;quizz: &quot; &amp; IsQuizzVisible &amp; &quot;notif: &quot; &amp; IsNotificationVisible &amp; &quot;controls: &quot; &amp; IsQuestControlsVisible</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="6885775845132737" type="System">
                                            <param id="0" name="Variable">PendingHideCallsCount</param>
                                            <param id="1" name="Value">PendingHideCallsCount + 1</param>
                                        </action>
                                        <action id="0" name="Call function" sid="698942345367727" type="Function">
                                            <param id="0" name="Name">&quot;LockUIActionsINProcessing&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;HideStageUI&quot;</param>
                                        </action>
                                        <action id="0" name="Call function" sid="8941705085437658" type="Function">
                                            <param id="0" name="Name">&quot;HidePhrase&quot;</param>
                                            <param id="1" name="Parameter {n}">Function.Param(1)</param>
                                        </action>
                                        <action id="0" name="Call function" sid="7703899467201282" type="Function">
                                            <param id="0" name="Name">&quot;HideQuizz&quot;</param>
                                            <param id="1" name="Parameter {n}">Function.Param(1)</param>
                                        </action>
                                        <action id="0" name="Call function" sid="533829614847119" type="Function">
                                            <param id="0" name="Name">&quot;HideNotification&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                        <action id="0" name="Call function" sid="3726353163656042" type="Function">
                                            <param id="0" name="Name">&quot;HideQuestControls&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>param(0): 1 - visible, 0 - not</comment>
                <event-block sid="4226294251647949">
                    <conditions>
                        <condition id="0" name="On function" sid="4280733038829125" type="Function">
                            <param id="0" name="Name">&quot;onPhraseVisibleChanged&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="976056802658954">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="4989041686024547" type="System">
                                    <param id="0" name="First value">Function.Param(0)</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Second value">IsPhraseVisible</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="4536744096986522" type="System">
                                    <param id="0" name="Variable">IsPhraseVisible</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                                <action id="0" name="Call function" sid="7705161222990876" type="Function">
                                    <param id="0" name="Name">&quot;DialogComponentVisibilityChanged&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>param(0): 1 - visible, 0 - not</comment>
                <event-block sid="4954367098600386">
                    <conditions>
                        <condition id="0" name="On function" sid="8549843234673115" type="Function">
                            <param id="0" name="Name">&quot;onQuizzVisibleChanged&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="9565465384749513">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="3792662922474089" type="System">
                                    <param id="0" name="First value">Function.Param(0)</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Second value">IsQuizzVisible</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="3585938559770901" type="System">
                                    <param id="0" name="Variable">IsQuizzVisible</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                                <action id="0" name="Call function" sid="5742533399318069" type="Function">
                                    <param id="0" name="Name">&quot;DialogComponentVisibilityChanged&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>param(0): 1 - visible, 0 - not</comment>
                <event-block sid="4152799724229481">
                    <conditions>
                        <condition id="0" name="On function" sid="8428168140729457" type="Function">
                            <param id="0" name="Name">&quot;onNotificationVisibleChanged&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="6646843437785073">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="3602292057643261" type="System">
                                    <param id="0" name="First value">Function.Param(0)</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Second value">IsNotificationVisible</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="1858206155386601" type="System">
                                    <param id="0" name="Variable">IsNotificationVisible</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                                <action id="0" name="Call function" sid="4767284666992488" type="Function">
                                    <param id="0" name="Name">&quot;DialogComponentVisibilityChanged&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>param(0): 1 - visible, 0 - not</comment>
                <event-block sid="9899946123473529">
                    <conditions>
                        <condition id="0" name="On function" sid="4833739371377914" type="Function">
                            <param id="0" name="Name">&quot;onQuestControlsVisibleChanged&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="9875870957289452">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="2634078229297444" type="System">
                                    <param id="0" name="First value">Function.Param(0)</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Second value">IsQuestControlsVisible</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="5569356620639661" type="System">
                                    <param id="0" name="Variable">IsQuestControlsVisible</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                                <action disabled="1" id="0" name="Call function" sid="6080679605692298" type="Function">
                                    <param id="0" name="Name">&quot;DialogComponentVisibilityChanged&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="4614176983300651">
                    <conditions>
                        <condition id="0" name="On function" sid="6403467256592012" type="Function">
                            <param id="0" name="Name">&quot;DialogComponentVisibilityChanged&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="9834640208565616" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;DialogComponentVisibilityChanged phrase: &quot; &amp; IsPhraseVisible &amp; &quot;quizz: &quot; &amp; IsQuizzVisible &amp; &quot;notif: &quot; &amp; IsNotificationVisible &amp; &quot;controls: &quot; &amp; IsQuestControlsVisible</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="9518351851636173">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="6856808547021339" type="System">
                                    <param id="0" name="Variable">IsPhraseVisible</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="6199273453164232" type="System">
                                    <param id="0" name="Variable">IsQuizzVisible</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="9493478824657867" type="System">
                                    <param id="0" name="Variable">IsNotificationVisible</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                                <condition disabled="1" id="-14" name="Compare variable" sid="4920514223544394" type="System">
                                    <param id="0" name="Variable">IsQuestControlsVisible</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="8817338467598089" type="Function">
                                    <param id="0" name="Name">&quot;onDialogHidden&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="-9" name="Set value" sid="7471908124922079" type="System">
                                    <param id="0" name="Variable">PendingHideCallsCount</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="0" name="Call function" sid="4928727860902687" type="Function">
                                    <param id="0" name="Name">&quot;UnlockUIActionsINProcessing&quot;</param>
                                    <param id="1" name="Parameter {n}">&quot;DialogComponentVisibilityChanged&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="1972742697210157">
                            <conditions>
                                <condition id="-22" name="Else" sid="2527091405848678" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="7648933637547909" type="Function">
                                    <param id="0" name="Name">&quot;onDialogVisible&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
